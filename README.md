# ComfyUI Resolution Presets 🎯

**一个专业的ComfyUI分辨率预设与工具插件**，支持多种AI模型的标准分辨率预设，提供智能尺寸计算和分辨率分析功能。

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![ComfyUI](https://img.shields.io/badge/ComfyUI-Plugin-blue)](https://github.com/comfyanonymous/ComfyUI)
[![Python](https://img.shields.io/badge/Python-3.8%2B-green)](https://www.python.org/)

---

## ✨ 特性亮点

### 🎯 核心功能
- **多模型预设**：SD1.5、SDXL、FLUX、WAN、QWEN等完整预设
- **智能尺寸计算**：自动计算最优分辨率，支持多种长宽比
- **分辨率分析**：详细的技术参数分析和使用建议
- **比例锁定**：智能比例计算，修改一边自动调整另一边
- **专业工具**：长宽比计算器、批量处理等实用工具

### 🚀 高性能处理
- 优化的Tensor/PIL转换，内存效率高
- 支持批量处理和多线程
- 智能缓存机制，重复计算极速响应

### 🎨 专业设计
- 统一的中文专业术语，易于理解
- 直观的UI界面，参数一目了然
- 详细的错误提示和操作指引

---

## 📐 节点列表

| 节点 | 功能 | 说明 |
|------|------|------|
| **分辨率预设 - 图像** | 处理图像和遮罩 | 支持多种裁剪和缩放算法 |
| **分辨率预设 - 潜在空间** | 生成潜在空间 | 用于AI图像生成 |
| **分辨率预设器** | 获取分辨率值 | 控制其他节点尺寸 |
| **分辨率计算器** | 智能计算尺寸 | 支持多种缩放模式 |
| **分辨率分析器** | 分析分辨率信息 | 提供使用建议 |
| **智能比例缩放器** | 高级比例计算 | 支持多种比例模式和限制 |
| **极简比例计算器** | 按比例计算尺寸 | 锁定比例，输入宽或高自动计算另一维度 |

---

![插件节点截图](https://github.com/fan200617120-ui/ComfyUI_Sizepresets/blob/main/2026-01-22_010856.png?raw=true)

## 🆕 新增节点详解

### 🎯 极简比例计算器
**功能**：锁定特定比例，只需输入宽度或高度，另一个维度自动计算。

**使用场景**：
- 生成特定比例的社交媒体图片
- 批量处理保持统一比例
- 快速在不同设备尺寸间切换

**参数说明**：
- **锁定比例**：选择预设比例或自定义比例
- **输入类型**：选择输入"宽度"或"高度"
- **输入值**：输入你想要的尺寸值
- **确保8的倍数**：自动对齐到8的倍数（AI模型友好）

**示例**：  
锁定比例 = "9:16 (竖屏视频)"
输入类型 = "输入宽度"
输入值 = 1080
输出 = 宽度:1080, 高度:1920  

![极简比例计算器示例 1](https://github.com/fan200617120-ui/ComfyUI_Sizepresets/blob/main/%E6%9E%81%E7%AE%80%E7%A4%BA%E4%BE%8B01.png?raw=true)

![极简比例计算器示例 2](https://github.com/fan200617120-ui/ComfyUI_Sizepresets/blob/main/%E6%9E%81%E7%AE%80%E7%A4%BA%E4%BE%8B02.png?raw=true)

### 🎯 智能比例缩放器
**功能**：更高级的比例控制，支持保持当前比例、自定义限制等。

**参数说明**：
- **目标比例**：保持当前比例或选择预设比例
- **调整维度**：选择要修改的维度（宽度/高度）
- **目标值**：输入目标尺寸
- **限制最大边长**：防止生成过大图像
- **最大边长**：设置最大允许边长

---

## 📊 支持的模型预设

| 模型 | 预设数量 | 特点 |
|------|----------|------|
| **SD1.5** | 5个 | 经典512×512基础预设 |
| **SDXL** | 13个 | 1024×1024及多种长宽比 |
| **FLUX** | 27个 | 完整2K/3K/4K/5K/6K大尺寸 |
| **WAN** | 14个 | 手机端和网页端优化 |
| **QWEN** | 7个 | 通义千问专用分辨率 |

---

## 🎨 FLUX 大尺寸预设示例
- **1920×1080 (16:9) 2K** - 高清宽屏
- **2560×1440 (16:9) 2.5K** - 2.5K分辨率
- **3072×1728 (16:9) 3K** - 3K超清
- **3840×2160 (16:9) 4K UHD** - 4K超高清
- **4096×2160 (17:9) 4K DCI** - 影院级4K
- **5120×2880 (16:9) 5K** - 5K专业级
- **6144×3456 (16:9) 6K** - 6K超精细

---

## 📦 安装方法

### 方法一：通过ComfyUI Manager安装（推荐）
1. 打开ComfyUI，确保已安装ComfyUI-Manager
2. 点击"Manager" → "Install Custom Nodes"
3. 搜索"ComfyUI_Sizepresets"
4. 点击安装，重启ComfyUI
注：如果那边能过审，则可以用方法一。

### 方法二：手动安装
```bash
cd ComfyUI/custom_nodes
git clone https://github.com/fan200617120-ui/ComfyUI_Sizepresets.git
```

### 方法三：直接下载安装
1. 下载最新版本ZIP
2. 解压到 `ComfyUI/custom_nodes/` 目录
3. 重启ComfyUI

---

### 基础使用
1. 在节点菜单中找到 **ResolutionPresets** 分类
2. 添加 **分辨率预设器** 节点
3. 选择模型和预设尺寸
4. 连接输出到你的工作流

### 使用极简比例计算器
1. 添加 **极简比例计算器** 节点
2. 选择要锁定的比例（如9:16）
3. 选择输入类型（宽度/高度）
4. 输入目标值
5. 连接输出到图像生成节点

### 工作流示例
```json
{
  "workflow": {
    "nodes": [
      {
        "type": "AspectRatioLock",
        "inputs": {
          "锁定比例": "9:16 (竖屏视频)",
          "输入类型": "输入宽度",
          "输入值": 1080
        }
      }
    ]
  }
}
```

---

## 🔧 技术特性

### 🚀 高性能处理
- 优化的Tensor/PIL转换，内存效率高
- 异步处理支持，提高工作流效率
- 智能尺寸验证，防止错误输入

### 🎨 专业设计
- 模块化代码结构，易于维护扩展
- 详细的日志输出，便于调试
- 统一的错误处理机制

### ✅ 完全兼容
- 兼容所有ComfyUI工作流
- 支持ComfyUI-Manager一键更新
- 与主流AI模型完全兼容

---

## 📁 目录结构
```
ComfyUI_Sizepresets/
├── __init__.py          # 插件初始化
├── nodes.py             # 所有节点定义
├── presets.py           # 分辨率预设配置
├── utils.py             # 工具函数库
├── README.md            # 说明文档
├── LICENSE              # MIT许可证
├── requirements.txt     # 依赖包列表
└── examples/            # 示例工作流
    ├── basic_workflow.json
    └── advanced_workflow.json
```

---

## 🎯 使用技巧

### 技巧1：批量处理保持比例
使用**极简比例计算器**锁定比例，然后批量处理不同尺寸的图像，确保所有输出保持统一比例。

### 技巧2：智能尺寸优化
使用**智能比例缩放器**的限制功能，自动将大尺寸图像缩放到合理范围，避免显存溢出。

### 技巧3：多平台适配
利用不同的预设比例，快速生成适合不同平台（Instagram、Twitter、YouTube等）的图片尺寸。

---

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

### 贡献流程：
1. Fork 本仓库
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

### 开发要求：
- 遵循现有代码风格
- 添加必要的注释
- 更新相关文档
- 确保向后兼容性

---

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

感谢所有贡献者和用户的支持！特别感谢：

- **ComfyUI社区** - 提供了优秀的平台
- **所有AI模型开发者** - 创造了强大的工具
- **插件测试人员** - 提供了宝贵的反馈

---

## 📞 支持与反馈

- **GitHub Issues**: [提交问题](https://github.com/fan200617120-ui/ComfyUI_Sizepresets/issues)
- **功能请求**: 欢迎提出新功能建议
- **Bug报告**: 发现Bug请及时报告

---

## ⭐ 支持项目

如果这个插件对你有帮助，请给个 ⭐ Star！你的支持是我持续更新的动力！

**Enjoy Creating! 🎨**






